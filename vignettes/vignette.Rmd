---
title: "VectraPolarisData"
author:
- name: Julia Wrobel
  affiliation: Department of Biostatistics and Informatics, Colorado School of Public Health
output:
  BiocStyle::html_document:
    toc_float: true
package: VectraPolarisData
abstract: |
  The VectraPolarisData ExperimentHub package provides two large multiplex immunofluorescence datasets collected by Akoya Biosciences Vectra 3 and Vectra Polaris platforms. Image preprocessing (cell segmentation and phenotyping) was performed using  Inform software. Data cover are formatted into objects of class SpatialExperiment.
vignette: |
  %\VignetteIndexEntry{VectraPolarisData}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---


```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup, include = FALSE}
library(VectraPolarisData)
```


# multiplex immunofluorescence imaging data

## Available datasets

List the two datasets here and mention that you have detailed data dictionaries below. Give a very brief overview of multiplex imaging data.



# Loading the data

To retrieve a dataset, we can use a dataset's corresponding named function `<id>()`, where `<id>` should correspond to one a valid dataset identifier (see `?VectraPolarisData`). E.g.:

```{r}
library(VectraPolarisData)
spe <- HumanLungCancerV3()
```

Alternatively, data can loaded directly from Bioconductor's `r Biocpkg("ExerimentHub")` as follows. First, we initialize a hub instance and store the complete list of records in a variable `eh`. Using `query()`, we then identify any records made available by the `VectraPolarisData` package, as well as their accession IDs (EH7311 for the lung cancer data). Finally, we can load the data into R via `eh[[id]]`, where `id` corresponds to the data entry's identifier we'd like to load. E.g.:

```{r}
library(ExperimentHub)
eh <- ExperimentHub()        # initialize hub instance
q <- query(eh, "VectraPolarisData") # retrieve 'VectraPolarisData' records
id <- q$ah_id[1]             # specify dataset ID to load
spe <- eh[[id]]              # load specified dataset
```


# Data Representation

Both the `HumanLungCancerV3()` and `HumanOvarianCancerVP()` datasets are stored as `SpatialExperiment` objects. This allows users of our data to interact with methods built for `SingleCellExperiment`, `SummarizedExperiment`, and `SpatialExperiment` class methods in Bioconductor. See [this ebook](https://lmweber.org/OSTA-book/index.html#welcome) for more details on `SpatialExperiment`.


The `SpatialExperiment` class was originally built for spatial transcriptomics data and follows the structure depicted in the schematic below (Righelli et al. 2021): 

```{r, echo=FALSE}
# image from Righelli et al. 2021
url <- "https://lmweber.org/OSTA-book/images/SPE.png"
```

<center><img src="`r url`"></center>


To use this class structure for multiplex imaging data we use slots in the following way.

# Data Dictionaries

Detailed tables representing what is provided in each dataset are listed here

## HumanLungCancerV3

## HumanOvarianCancerVP


# Transforming VectraPolarisData to other formats

Show how to transform from a spatial experiment object to a dataframe, if that is your preferred analysis method.

# Citation Info

The objects provided in this package are rich data sources we encourage others to use in their own analyses. If you do include them in your peer-reviewed work, we ask that you cite our package and the original studies. 

To cite the `HumanLungCancerV3()` data in `bibtex` format, use:

```{}
@article{johnson2021cancer,
  title={Cancer cell-specific MHCII expression as a determinant of the immune infiltrate organization and function in the non-small cell lung cancer tumor microenvironment.},
  author={Johnson, AM and Boland, JM and Wrobel, J and Klezcko, EK and Weiser-Evans, M and Hopp, K and Heasley, L and Clambey, ET and Jordan, K and Nemenoff, RA and others},
  journal={Journal of Thoracic Oncology: Official Publication of the International Association for the Study of Lung Cancer},
  year={2021}
}
```

To cite the `HumanOvarianCancerVP()` data, use:

```{}
@article{steinhart2021spatial,
  title={The spatial context of tumor-infiltrating immune cells associates with improved ovarian cancer survival},
  author={Steinhart, Benjamin and Jordan, Kimberly R and Bapat, Jaidev and Post, Miriam D and Brubaker, Lindsay W and Bitler, Benjamin G and Wrobel, Julia},
  journal={Molecular Cancer Research},
  volume={19},
  number={12},
  pages={1973--1979},
  year={2021},
  publisher={AACR}
}
```

